{% extends "base.html" %}

{% block title %}{% if update %}Update Product{% else %}Add Product{% endif %}{% endblock %}
{% block sidebar_links %}
<a href="/home">Home</a>
<a href="/admin_dashboard">Admin Dashboard</a>
<a href="/manage_products">Manage Products</a>
<a href="/admin_logout">Logout</a>
<button type="button" onclick="toggleSidebar()">Close</button>
{% endblock %}
{% block content %}
<h1>{% if update %}Update Product{% else %}Add New Product{% endif %}</h1>
{% if message %}
<p style="color: green; font-weight: 500; padding: 10px;">{{ message }}</p>
{% endif %}
<div class="form-container">
    <form action="{% if update %}/update_product/{{ product.id }}{% else %}/add_products{% endif %}" method="POST"
        enctype="multipart/form-data">
        <input type="text" name="product_name" placeholder="Book Name" required
            value="{% if update %}{{ product.name }}{% endif %}">
        <input type="file" name="product_image" accept="image/*" {% if not update %}required{% endif %}>
        <select name="product_genre" required>
            <option value="" disabled {% if not update %}selected{% endif %}>Select Book Genre</option>
            <option value="Fiction" {% if update and product.category=="Fiction" %}selected{% endif %}>Fiction
            </option>
            <option value="Non-Fiction" {% if update and product.category=="Non-Fiction" %}selected{% endif %}>
                Non-Fiction</option>
            <option value="Mystery" {% if update and product.category=="Mystery" %}selected{% endif %}>Mystery
            </option>
            <option value="Science Fiction" {% if update and product.category=="Science Fiction" %}selected{% endif %}>
                Science Fiction</option>
            <option value="Fantasy" {% if update and product.category=="Fantasy" %}selected{% endif %}>Fantasy
            </option>
            <option value="Biography" {% if update and product.category=="Biography" %}selected{% endif %}>Biography
            </option>
            <option value="History" {% if update and product.category=="History" %}selected{% endif %}>History
            </option>
            <option value="Self-Help" {% if update and product.category=="Self-Help" %}selected{% endif %}>Self-Help
            </option>
        </select>
        <input type="number" name="actual_price" placeholder="Actual Price" required
            value="{% if update %}{{ product.actual_price }}{% endif %}">
        <input type="number" name="discount_price" placeholder="Discounted Price"
            value="{% if update %}{{ product.discount_price }}{% endif %}">
        <input type="number" name="quantity" placeholder="Stock" required
            value="{% if update %}{{ product.stock }}{% endif %}">
        <button type="submit">{% if update %}Update Book{% else %}Add Book{% endif %}</button>
    </form>
</div>
{% endblock %}